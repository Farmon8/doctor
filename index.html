<!DOCTYPE html>
<html lang="tg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Луғатсупорӣ - Юнитҳо</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 600px;
            padding: 30px;
            text-align: center;
        }
        
        .header {
            margin-bottom: 30px;
        }
        
        .header h1 {
            color: #333;
            font-size: 24px;
            margin-bottom: 10px;
        }
        
        .unit-selection {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .unit-btn {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 15px;
            font-size: 16px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .unit-btn:hover {
            background-color: #45a049;
        }
        
        .progress {
            font-size: 16px;
            color: #555;
            margin-bottom: 20px;
        }
        
        .word-container {
            background-color: #f9f9f9;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 25px;
            border: 1px solid #eee;
        }
        
        .word {
            font-size: 22px;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }
        
        .translation {
            font-size: 18px;
            color: #555;
            margin-bottom: 5px;
        }
        
        .timer-container {
            width: 120px;
            height: 120px;
            margin: 0 auto 25px;
            position: relative;
        }
        
        .timer-circle {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 8px solid #f0f0f0;
            position: relative;
            overflow: hidden;
        }
        
        .timer-progress {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            clip: rect(0, 60px, 120px, 0);
            background-color: #4CAF50;
            transform: rotate(0deg);
        }
        
        .timer-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 24px;
            font-weight: bold;
            color: #333;
        }
        
        .answer-input {
            width: 100%;
            padding: 15px;
            font-size: 16px;
            border: 1px solid #ddd;
            border-radius: 5px;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .submit-btn {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 12px 25px;
            font-size: 16px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .submit-btn:hover {
            background-color: #45a049;
        }
        
        .results {
            display: none;
            margin-top: 30px;
            text-align: left;
        }
        
        .results h2 {
            color: #333;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .stats {
            margin-bottom: 20px;
        }
        
        .stat-item {
            margin-bottom: 10px;
            font-size: 16px;
        }
        
        .stat-value {
            font-weight: bold;
        }
        
        .errors {
            margin-top: 20px;
        }
        
        .error-item {
            background-color: #f8f8f8;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 10px;
            border-left: 3px solid #e74c3c;
        }
        
        .error-word {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .correct-answer {
            color: #27ae60;
        }
        
        .user-answer {
            color: #e74c3c;
            font-style: italic;
        }
        
        .success-message {
            font-size: 18px;
            font-weight: bold;
            color: #27ae60;
            margin-top: 20px;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container" id="main-container">
        <div class="header">
            <h1>Луғатсупорӣ</h1>
            <p>Юнети лексикиро интихоб кунед</p>
        </div>
        
        <div class="unit-selection" id="unit-selection">
            <button class="unit-btn" id="unit5-btn">Юнит 5 Охир (50 калима)</button>
            <button class="unit-btn" id="unit6-btn">Юнит 6 (50 калима)</button>
            <button class="unit-btn" id="unit7-btn">Юнит 7 Охир (50 калима)</button>
        </div>
        
        <div id="game-screen" style="display: none;">
            <div class="header">
                <h1 id="unit-title">Юнит 5 Охир</h1>
                <div class="progress" id="progress">1/50</div>
            </div>
            
            <div class="word-container">
                <div class="word" id="word">канор, край</div>
                <div class="translation" id="translation">край</div>
            </div>
            
            <div class="timer-container">
                <div class="timer-circle">
                    <div class="timer-progress" id="timer-progress"></div>
                    <div class="timer-text" id="timer-text">7:00</div>
                </div>
            </div>
            
            <input type="text" class="answer-input" id="answer" placeholder="Ҷавобро ба англисӣ нависед..." autocomplete="off">
            <button class="submit-btn" id="submit-btn">Фиристодан</button>
        </div>
        
        <div class="results" id="results">
            <h2>Натиҷаҳо</h2>
            
            <div class="stats">
                <div class="stat-item">Шумо <span class="stat-value" id="score">0</span> аз <span class="stat-value">50</span>-ро дуруст ҷавоб додед</div>
                <div class="stat-item">Фоизи дурустӣ: <span class="stat-value" id="percentage">0%</span></div>
                <div class="stat-item">Миқдори хатоҳо: <span class="stat-value" id="mistakes">0</span></div>
            </div>
            
            <div id="success-message" class="success-message"></div>
            
            <div class="errors" id="errors">
                <h3>Хатоҳо:</h3>
                <!-- Errors will be displayed here -->
            </div>
            
            <button class="submit-btn" id="restart-btn" style="margin-top: 20px; width: 100%;">Бозгашт ба юнитҳо</button>
        </div>
    </div>

    <script>
        // Vocabulary for Unit 5 End
        const unit5Vocabulary = [
            { tajik: "канор, край", russian: "край", english: "edge" },
            // ... (остальные слова из Unit 5 как в предыдущем коде)
        ];

        // Vocabulary for Unit 6
        const unit6Vocabulary = [
            { tajik: "пляжи пушида", russian: "закрытый пляж", english: "private beach" },
            // ... (остальные слова из Unit 6 как в предыдущем коде)
        ];

        // Vocabulary for Unit 7 End
        const unit7Vocabulary = [
            { tajik: "ихтиёрй", russian: "произвольный", english: "arbitrary" },
            { tajik: "катор, саф", russian: "строй, боевой порядок", english: "array" },
            { tajik: "бехудо", russian: "атеист", english: "atheist" },
            { tajik: "хакикй, асли", russian: "истинный, настоящий", english: "authentic" },
            { tajik: "муътадил", russian: "сносный", english: "bearable" },
            { tajik: "эҳтимолй", russian: "вероятный", english: "believable" },
            { tajik: "хушбахт", russian: "счастливый", english: "blissful" },
            { tajik: "иштиҳои тӯм", russian: "приятного аппетита!", english: "Bon appetit!" },
            { tajik: "чалбкунанда", russian: "захватывающий", english: "breathtaking" },
            { tajik: "бо банд чаҳидан", russian: "прыжок на верёвке", english: "bungee jumping" },
            { tajik: "пинҳон кардан", russian: "скрывать", english: "conceal" },
            { tajik: "ривояти бофта", russian: "теория заговоров", english: "conspiracy theory" },
            { tajik: "имконпазир", russian: "вероятный", english: "credible" },
            { tajik: "кундфахм", russian: "твердолобый", english: "diehard" },
            { tajik: "маҳдудият дар хониш", russian: "неспособный к чтению", english: "dyslexic" },
            { tajik: "муфассал коркардашуда", russian: "детально разработанный", english: "elaborate" },
            { tajik: "калбакӣ", russian: "фальшивый", english: "fake" },
            { tajik: "шухии дағал", russian: "грубая шутка", english: "farce" },
            { tajik: "шайтонӣ, золимӣ", russian: "дьявольский", english: "fiendish" },
            { tajik: "ларзидан", russian: "дрожать", english: "flutter" },
            { tajik: "пай, нақш", russian: "след", english: "footstep" },
            { tajik: "сахӣ, олиҳиммат", russian: "щедрый", english: "generous" },
            { tajik: "ҳақиқӣ, бенайранг", russian: "истинный", english: "genuine" },
            { tajik: "геологӣ", russian: "геологический", english: "geologic(al)" },
            { tajik: "гунахкор", russian: "виновный", english: "guilty" },
            { tajik: "баромалани чӯҷа аз тухм", russian: "высиживать", english: "hatch" },
            { tajik: "дурӯғ, фиреб", russian: "обман, ложь", english: "hoax" },
            { tajik: "таҳқир кардан", russian: "оскорблённые чувства", english: "hurt feeling" },
            { tajik: "фарзия", russian: "гипотеза", english: "hypotheses" },
            { tajik: "аз ҳақиқат дур", russian: "неправдоподобный", english: "implausible" },
            { tajik: "касалии бедорхобӣ", russian: "страдающий бессонницей", english: "insomniac" },
            { tajik: "ба зурӣ даромадан", russian: "вторжение", english: "intrusions" },
            { tajik: "ҷудокуни, танҳоӣ", russian: "изоляция", english: "isolation" },
            { tajik: "зебонадааст, ба ту муносиб аст", russian: "тебе идёт", english: "it suit you" },
            { tajik: "асоснок", russian: "обоснованный", english: "justified" },
            { tajik: "қонунӣ, ҳуқуқӣ", russian: "законный", english: "legal" },
            { tajik: "нафрат кардан", russian: "ненавидеть", english: "loathe" },
            { tajik: "шабушкин", russian: "вшивый", english: "lousy" },
            { tajik: "пухта, расида", russian: "зрелый", english: "mature" },
            { tajik: "воситаи ахбори умум", russian: "средства массовой информации", english: "media" },
            { tajik: "аъзои парламент", russian: "член парламента", english: "MP (Member of Parliament)" },
            { tajik: "дунёвӣ", russian: "земной, мирской", english: "mundane" },
            { tajik: "NASA", russian: "Национальное агентство по аэронавтике и исследованию космического пространства", english: "NASA (National Aeronautics and Space Administration)" },
            { tajik: "шахси бараҳна", russian: "нудист", english: "naturist" },
            { tajik: "шахси оромихоҳ", russian: "пацифист", english: "pacifist" },
            { tajik: "паранойя (касалии руҳи)", russian: "паранойя", english: "paranoia" },
            { tajik: "ба ҳақиқат монанд", russian: "правдоподобный", english: "plausible" },
            { tajik: "зиндагии шахсӣ", russian: "личная жизнь", english: "private life" },
            { tajik: "мумкин", russian: "возможный", english: "probable" },
            { tajik: "ҳақиқӣ", russian: "реальный", english: "real" }
        ];

        // DOM elements
        const unitSelection = document.getElementById('unit-selection');
        const gameScreen = document.getElementById('game-screen');
        const unitTitle = document.getElementById('unit-title');
        const wordElement = document.getElementById('word');
        const translationElement = document.getElementById('translation');
        const progressElement = document.getElementById('progress');
        const timerProgressElement = document.getElementById('timer-progress');
        const timerTextElement = document.getElementById('timer-text');
        const answerInput = document.getElementById('answer');
        const submitBtn = document.getElementById('submit-btn');
        const resultsElement = document.getElementById('results');
        const scoreElement = document.getElementById('score');
        const percentageElement = document.getElementById('percentage');
        const mistakesElement = document.getElementById('mistakes');
        const errorsContainer = document.getElementById('errors');
        const successMessage = document.getElementById('success-message');
        const unit5Btn = document.getElementById('unit5-btn');
        const unit6Btn = document.getElementById('unit6-btn');
        const unit7Btn = document.getElementById('unit7-btn');
        const restartBtn = document.getElementById('restart-btn');
        const mainContainer = document.getElementById('main-container');

        // Game state
        let currentVocabulary = [];
        let currentIndex = 0;
        let score = 0;
        let mistakes = [];
        let timeLeft = 420; // 7 minutes in seconds
        let timer;

        // Start selected unit
        function startUnit(unitName, vocabulary) {
            currentVocabulary = [...vocabulary]; // Copy the array
            shuffleArray(currentVocabulary); // Shuffle the words
            
            currentIndex = 0;
            score = 0;
            timeLeft = 420;
            mistakes = [];
            
            unitSelection.style.display = 'none';
            gameScreen.style.display = 'block';
            resultsElement.style.display = 'none';
            
            unitTitle.textContent = unitName;
            showWord();
            startTimer();
            
            setTimeout(() => {
                answerInput.focus();
            }, 100);
        }

        // Show current word
        function showWord() {
            wordElement.textContent = currentVocabulary[currentIndex].tajik;
            translationElement.textContent = currentVocabulary[currentIndex].russian;
            progressElement.textContent = `${currentIndex + 1}/${currentVocabulary.length}`;
            answerInput.value = '';
        }

        // Start timer
        function startTimer() {
            clearInterval(timer);
            updateTimer();
            
            timer = setInterval(() => {
                timeLeft--;
                updateTimer();
                
                if (timeLeft <= 0) {
                    finishGame();
                }
            }, 1000);
        }

        // Update timer display
        function updateTimer() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            timerTextElement.textContent = `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
            
            // Update progress circle
            const progress = (420 - timeLeft) / 420 * 360;
            timerProgressElement.style.transform = `rotate(${progress}deg)`;
            
            // Change color based on time left
            if (timeLeft < 60) {
                timerProgressElement.style.backgroundColor = '#e74c3c';
            } else if (timeLeft < 180) {
                timerProgressElement.style.backgroundColor = '#f39c12';
            } else {
                timerProgressElement.style.backgroundColor = '#4CAF50';
            }
        }

        // Check answer
        function checkAnswer() {
            const userAnswer = answerInput.value.trim().toLowerCase();
            const correctAnswer = currentVocabulary[currentIndex].english.toLowerCase();
            
            if (userAnswer === correctAnswer) {
                score++;
            } else {
                mistakes.push({
                    word: currentVocabulary[currentIndex].tajik,
                    translation: currentVocabulary[currentIndex].russian,
                    correct: currentVocabulary[currentIndex].english,
                    userAnswer: userAnswer
                });
            }
            
            currentIndex++;
            
            if (currentIndex < currentVocabulary.length && timeLeft > 0) {
                showWord();
            } else {
                finishGame();
            }
        }

        // Finish game and show results
        function finishGame() {
            clearInterval(timer);
            
            const percentage = Math.round((score / currentVocabulary.length) * 100);
            
            scoreElement.textContent = score;
            percentageElement.textContent = `${percentage}%`;
            mistakesElement.textContent = mistakes.length;
            
            // Display success message based on score
            if (score >= 42) {
                successMessage.textContent = "Аъло! Шумо аз 50 калима " + score + "-торо дуруст ҷавоб додед! 🎉";
                successMessage.style.color = "#27ae60";
            } else {
                successMessage.textContent = "Талош кунед, шумо аз 50 калима " + score + "-торо дуруст ҷавоб додед. 💪";
                successMessage.style.color = "#e74c3c";
            }
            
            // Display errors
            errorsContainer.innerHTML = '';
            mistakes.forEach((mistake, index) => {
                const errorItem = document.createElement('div');
                errorItem.className = 'error-item';
                errorItem.innerHTML = `
                    <div class="error-word">${index + 1}. ${mistake.word} (${mistake.translation})</div>
                    <div class="correct-answer">Ҷавоби дуруст: ${mistake.correct}</div>
                    <div class="user-answer">Ҷавоби шумо: ${mistake.userAnswer || '---'}</div>
                `;
                errorsContainer.appendChild(errorItem);
            });
            
            // Show results and hide game screen
            gameScreen.style.display = 'none';
            resultsElement.style.display = 'block';
        }

        // Shuffle array function
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        // Event listeners
        submitBtn.addEventListener('click', checkAnswer);
        
        answerInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                checkAnswer();
            }
        });

        // Unit selection buttons
        unit5Btn.addEventListener('click', () => {
            startUnit("Юнит 5 Охир", unit5Vocabulary);
        });
        
        unit6Btn.addEventListener('click', () => {
            startUnit("Юнит 6", unit6Vocabulary);
        });
        
        unit7Btn.addEventListener('click', () => {
            startUnit("Юнит 7 Охир", unit7Vocabulary);
        });

        // Restart button
        restartBtn.addEventListener('click', function() {
            resultsElement.style.display = 'none';
            unitSelection.style.display = 'flex';
        });
    </script>
</body>
</html>
