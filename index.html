<!DOCTYPE html>
<html lang="tg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–õ—É“ì–∞—Ç—Å—É–ø–æ—Ä”£ - –Æ–Ω–∏—Ç“≥–æ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 600px;
            padding: 30px;
            text-align: center;
        }
        
        .header {
            margin-bottom: 30px;
        }
        
        .header h1 {
            color: #333;
            font-size: 24px;
            margin-bottom: 10px;
        }
        
        .unit-selection {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .unit-btn {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 15px;
            font-size: 16px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .unit-btn:hover {
            background-color: #45a049;
        }
        
        .progress {
            font-size: 16px;
            color: #555;
            margin-bottom: 20px;
        }
        
        .word-container {
            background-color: #f9f9f9;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 25px;
            border: 1px solid #eee;
        }
        
        .word {
            font-size: 22px;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }
        
        .translation {
            font-size: 18px;
            color: #555;
            margin-bottom: 5px;
        }
        
        .timer-container {
            width: 120px;
            height: 120px;
            margin: 0 auto 25px;
            position: relative;
        }
        
        .timer-circle {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 8px solid #f0f0f0;
            position: relative;
            overflow: hidden;
        }
        
        .timer-progress {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            clip: rect(0, 60px, 120px, 0);
            background-color: #4CAF50;
            transform: rotate(0deg);
        }
        
        .timer-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 24px;
            font-weight: bold;
            color: #333;
        }
        
        .answer-input {
            width: 100%;
            padding: 15px;
            font-size: 16px;
            border: 1px solid #ddd;
            border-radius: 5px;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .submit-btn {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 12px 25px;
            font-size: 16px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .submit-btn:hover {
            background-color: #45a049;
        }
        
        .results {
            display: none;
            margin-top: 30px;
            text-align: left;
        }
        
        .results h2 {
            color: #333;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .stats {
            margin-bottom: 20px;
        }
        
        .stat-item {
            margin-bottom: 10px;
            font-size: 16px;
        }
        
        .stat-value {
            font-weight: bold;
        }
        
        .errors {
            margin-top: 20px;
        }
        
        .error-item {
            background-color: #f8f8f8;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 10px;
            border-left: 3px solid #e74c3c;
        }
        
        .error-word {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .correct-answer {
            color: #27ae60;
        }
        
        .user-answer {
            color: #e74c3c;
            font-style: italic;
        }
        
        .success-message {
            font-size: 18px;
            font-weight: bold;
            color: #27ae60;
            margin-top: 20px;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container" id="main-container">
        <div class="header">
            <h1>–õ—É“ì–∞—Ç—Å—É–ø–æ—Ä”£</h1>
            <p>–Æ–Ω–µ—Ç–∏ –ª–µ–∫—Å–∏–∫–∏—Ä–æ –∏–Ω—Ç–∏—Ö–æ–± –∫—É–Ω–µ–¥</p>
        </div>
        
        <div class="unit-selection" id="unit-selection">
            <button class="unit-btn" id="unit5-btn">–Æ–Ω–∏—Ç 5 –û—Ö–∏—Ä (50 –∫–∞–ª–∏–º–∞)</button>
            <button class="unit-btn" id="unit6-btn">–Æ–Ω–∏—Ç 6 (50 –∫–∞–ª–∏–º–∞)</button>
            <button class="unit-btn" id="unit7-btn">–Æ–Ω–∏—Ç 7 –û—Ö–∏—Ä (50 –∫–∞–ª–∏–º–∞)</button>
        </div>
        
        <div id="game-screen" style="display: none;">
            <div class="header">
                <h1 id="unit-title">–Æ–Ω–∏—Ç 5 –û—Ö–∏—Ä</h1>
                <div class="progress" id="progress">1/50</div>
            </div>
            
            <div class="word-container">
                <div class="word" id="word">–∫–∞–Ω–æ—Ä, –∫—Ä–∞–π</div>
                <div class="translation" id="translation">–∫—Ä–∞–π</div>
            </div>
            
            <div class="timer-container">
                <div class="timer-circle">
                    <div class="timer-progress" id="timer-progress"></div>
                    <div class="timer-text" id="timer-text">7:00</div>
                </div>
            </div>
            
            <input type="text" class="answer-input" id="answer" placeholder="“∂–∞–≤–æ–±—Ä–æ –±–∞ –∞–Ω–≥–ª–∏—Å”£ –Ω–∞–≤–∏—Å–µ–¥..." autocomplete="off">
            <button class="submit-btn" id="submit-btn">–§–∏—Ä–∏—Å—Ç–æ–¥–∞–Ω</button>
        </div>
        
        <div class="results" id="results">
            <h2>–ù–∞—Ç–∏“∑–∞“≥–æ</h2>
            
            <div class="stats">
                <div class="stat-item">–®—É–º–æ <span class="stat-value" id="score">0</span> –∞–∑ <span class="stat-value">50</span>-—Ä–æ –¥—É—Ä—É—Å—Ç “∑–∞–≤–æ–± –¥–æ–¥–µ–¥</div>
                <div class="stat-item">–§–æ–∏–∑–∏ –¥—É—Ä—É—Å—Ç”£: <span class="stat-value" id="percentage">0%</span></div>
                <div class="stat-item">–ú–∏“õ–¥–æ—Ä–∏ —Ö–∞—Ç–æ“≥–æ: <span class="stat-value" id="mistakes">0</span></div>
            </div>
            
            <div id="success-message" class="success-message"></div>
            
            <div class="errors" id="errors">
                <h3>–•–∞—Ç–æ“≥–æ:</h3>
                <!-- Errors will be displayed here -->
            </div>
            
            <button class="submit-btn" id="restart-btn" style="margin-top: 20px; width: 100%;">–ë–æ–∑–≥–∞—à—Ç –±–∞ —é–Ω–∏—Ç“≥–æ</button>
        </div>
    </div>

    <script>
        // Vocabulary for Unit 5 End
        const unit5Vocabulary = [
            { tajik: "–∫–∞–Ω–æ—Ä, –∫—Ä–∞–π", russian: "–∫—Ä–∞–π", english: "edge" },
            // ... (–æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å–ª–æ–≤–∞ –∏–∑ Unit 5 –∫–∞–∫ –≤ –ø—Ä–µ–¥—ã–¥—É—â–µ–º –∫–æ–¥–µ)
        ];

        // Vocabulary for Unit 6
        const unit6Vocabulary = [
            { tajik: "–ø–ª—è–∂–∏ –ø—É—à–∏–¥–∞", russian: "–∑–∞–∫—Ä—ã—Ç—ã–π –ø–ª—è–∂", english: "private beach" },
            // ... (–æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å–ª–æ–≤–∞ –∏–∑ Unit 6 –∫–∞–∫ –≤ –ø—Ä–µ–¥—ã–¥—É—â–µ–º –∫–æ–¥–µ)
        ];

        // Vocabulary for Unit 7 End
        const unit7Vocabulary = [
            { tajik: "–∏—Ö—Ç–∏—ë—Ä–π", russian: "–ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π", english: "arbitrary" },
            { tajik: "–∫–∞—Ç–æ—Ä, —Å–∞—Ñ", russian: "—Å—Ç—Ä–æ–π, –±–æ–µ–≤–æ–π –ø–æ—Ä—è–¥–æ–∫", english: "array" },
            { tajik: "–±–µ—Ö—É–¥–æ", russian: "–∞—Ç–µ–∏—Å—Ç", english: "atheist" },
            { tajik: "—Ö–∞–∫–∏–∫–π, –∞—Å–ª–∏", russian: "–∏—Å—Ç–∏–Ω–Ω—ã–π, –Ω–∞—Å—Ç–æ—è—â–∏–π", english: "authentic" },
            { tajik: "–º—É—ä—Ç–∞–¥–∏–ª", russian: "—Å–Ω–æ—Å–Ω—ã–π", english: "bearable" },
            { tajik: "—ç“≥—Ç–∏–º–æ–ª–π", russian: "–≤–µ—Ä–æ—è—Ç–Ω—ã–π", english: "believable" },
            { tajik: "—Ö—É—à–±–∞—Ö—Ç", russian: "—Å—á–∞—Å—Ç–ª–∏–≤—ã–π", english: "blissful" },
            { tajik: "–∏—à—Ç–∏“≥–æ–∏ —Ç”Ø–º", russian: "–ø—Ä–∏—è—Ç–Ω–æ–≥–æ –∞–ø–ø–µ—Ç–∏—Ç–∞!", english: "Bon appetit!" },
            { tajik: "—á–∞–ª–±–∫—É–Ω–∞–Ω–¥–∞", russian: "–∑–∞—Ö–≤–∞—Ç—ã–≤–∞—é—â–∏–π", english: "breathtaking" },
            { tajik: "–±–æ –±–∞–Ω–¥ —á–∞“≥–∏–¥–∞–Ω", russian: "–ø—Ä—ã–∂–æ–∫ –Ω–∞ –≤–µ—Ä—ë–≤–∫–µ", english: "bungee jumping" },
            { tajik: "–ø–∏–Ω“≥–æ–Ω –∫–∞—Ä–¥–∞–Ω", russian: "—Å–∫—Ä—ã–≤–∞—Ç—å", english: "conceal" },
            { tajik: "—Ä–∏–≤–æ—è—Ç–∏ –±–æ—Ñ—Ç–∞", russian: "—Ç–µ–æ—Ä–∏—è –∑–∞–≥–æ–≤–æ—Ä–æ–≤", english: "conspiracy theory" },
            { tajik: "–∏–º–∫–æ–Ω–ø–∞–∑–∏—Ä", russian: "–≤–µ—Ä–æ—è—Ç–Ω—ã–π", english: "credible" },
            { tajik: "–∫—É–Ω–¥—Ñ–∞—Ö–º", russian: "—Ç–≤–µ—Ä–¥–æ–ª–æ–±—ã–π", english: "diehard" },
            { tajik: "–º–∞“≥–¥—É–¥–∏—è—Ç –¥–∞—Ä —Ö–æ–Ω–∏—à", russian: "–Ω–µ—Å–ø–æ—Å–æ–±–Ω—ã–π –∫ —á—Ç–µ–Ω–∏—é", english: "dyslexic" },
            { tajik: "–º—É—Ñ–∞—Å—Å–∞–ª –∫–æ—Ä–∫–∞—Ä–¥–∞—à—É–¥–∞", russian: "–¥–µ—Ç–∞–ª—å–Ω–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π", english: "elaborate" },
            { tajik: "–∫–∞–ª–±–∞–∫”£", russian: "—Ñ–∞–ª—å—à–∏–≤—ã–π", english: "fake" },
            { tajik: "—à—É—Ö–∏–∏ –¥–∞“ì–∞–ª", russian: "–≥—Ä—É–±–∞—è —à—É—Ç–∫–∞", english: "farce" },
            { tajik: "—à–∞–π—Ç–æ–Ω”£, –∑–æ–ª–∏–º”£", russian: "–¥—å—è–≤–æ–ª—å—Å–∫–∏–π", english: "fiendish" },
            { tajik: "–ª–∞—Ä–∑–∏–¥–∞–Ω", russian: "–¥—Ä–æ–∂–∞—Ç—å", english: "flutter" },
            { tajik: "–ø–∞–π, –Ω–∞“õ—à", russian: "—Å–ª–µ–¥", english: "footstep" },
            { tajik: "—Å–∞—Ö”£, –æ–ª–∏“≥–∏–º–º–∞—Ç", russian: "—â–µ–¥—Ä—ã–π", english: "generous" },
            { tajik: "“≥–∞“õ–∏“õ”£, –±–µ–Ω–∞–π—Ä–∞–Ω–≥", russian: "–∏—Å—Ç–∏–Ω–Ω—ã–π", english: "genuine" },
            { tajik: "–≥–µ–æ–ª–æ–≥”£", russian: "–≥–µ–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π", english: "geologic(al)" },
            { tajik: "–≥—É–Ω–∞—Ö–∫–æ—Ä", russian: "–≤–∏–Ω–æ–≤–Ω—ã–π", english: "guilty" },
            { tajik: "–±–∞—Ä–æ–º–∞–ª–∞–Ω–∏ —á”Ø“∑–∞ –∞–∑ —Ç—É—Ö–º", russian: "–≤—ã—Å–∏–∂–∏–≤–∞—Ç—å", english: "hatch" },
            { tajik: "–¥—É—Ä”Ø“ì, —Ñ–∏—Ä–µ–±", russian: "–æ–±–º–∞–Ω, –ª–æ–∂—å", english: "hoax" },
            { tajik: "—Ç–∞“≥“õ–∏—Ä –∫–∞—Ä–¥–∞–Ω", russian: "–æ—Å–∫–æ—Ä–±–ª—ë–Ω–Ω—ã–µ —á—É–≤—Å—Ç–≤–∞", english: "hurt feeling" },
            { tajik: "—Ñ–∞—Ä–∑–∏—è", russian: "–≥–∏–ø–æ—Ç–µ–∑–∞", english: "hypotheses" },
            { tajik: "–∞–∑ “≥–∞“õ–∏“õ–∞—Ç –¥—É—Ä", russian: "–Ω–µ–ø—Ä–∞–≤–¥–æ–ø–æ–¥–æ–±–Ω—ã–π", english: "implausible" },
            { tajik: "–∫–∞—Å–∞–ª–∏–∏ –±–µ–¥–æ—Ä—Ö–æ–±”£", russian: "—Å—Ç—Ä–∞–¥–∞—é—â–∏–π –±–µ—Å—Å–æ–Ω–Ω–∏—Ü–µ–π", english: "insomniac" },
            { tajik: "–±–∞ –∑—É—Ä”£ –¥–∞—Ä–æ–º–∞–¥–∞–Ω", russian: "–≤—Ç–æ—Ä–∂–µ–Ω–∏–µ", english: "intrusions" },
            { tajik: "“∑—É–¥–æ–∫—É–Ω–∏, —Ç–∞–Ω“≥–æ”£", russian: "–∏–∑–æ–ª—è—Ü–∏—è", english: "isolation" },
            { tajik: "–∑–µ–±–æ–Ω–∞–¥–∞–∞—Å—Ç, –±–∞ —Ç—É –º—É–Ω–æ—Å–∏–± –∞—Å—Ç", russian: "—Ç–µ–±–µ –∏–¥—ë—Ç", english: "it suit you" },
            { tajik: "–∞—Å–æ—Å–Ω–æ–∫", russian: "–æ–±–æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–π", english: "justified" },
            { tajik: "“õ–æ–Ω—É–Ω”£, “≥—É“õ—É“õ”£", russian: "–∑–∞–∫–æ–Ω–Ω—ã–π", english: "legal" },
            { tajik: "–Ω–∞—Ñ—Ä–∞—Ç –∫–∞—Ä–¥–∞–Ω", russian: "–Ω–µ–Ω–∞–≤–∏–¥–µ—Ç—å", english: "loathe" },
            { tajik: "—à–∞–±—É—à–∫–∏–Ω", russian: "–≤—à–∏–≤—ã–π", english: "lousy" },
            { tajik: "–ø—É—Ö—Ç–∞, —Ä–∞—Å–∏–¥–∞", russian: "–∑—Ä–µ–ª—ã–π", english: "mature" },
            { tajik: "–≤–æ—Å–∏—Ç–∞–∏ –∞—Ö–±–æ—Ä–∏ —É–º—É–º", russian: "—Å—Ä–µ–¥—Å—Ç–≤–∞ –º–∞—Å—Å–æ–≤–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏", english: "media" },
            { tajik: "–∞—ä–∑–æ–∏ –ø–∞—Ä–ª–∞–º–µ–Ω—Ç", russian: "—á–ª–µ–Ω –ø–∞—Ä–ª–∞–º–µ–Ω—Ç–∞", english: "MP (Member of Parliament)" },
            { tajik: "–¥—É–Ω—ë–≤”£", russian: "–∑–µ–º–Ω–æ–π, –º–∏—Ä—Å–∫–æ–π", english: "mundane" },
            { tajik: "NASA", russian: "–ù–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –∞–≥–µ–Ω—Ç—Å—Ç–≤–æ –ø–æ –∞—ç—Ä–æ–Ω–∞–≤—Ç–∏–∫–µ –∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—é –∫–æ—Å–º–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞", english: "NASA (National Aeronautics and Space Administration)" },
            { tajik: "—à–∞—Ö—Å–∏ –±–∞—Ä–∞“≥–Ω–∞", russian: "–Ω—É–¥–∏—Å—Ç", english: "naturist" },
            { tajik: "—à–∞—Ö—Å–∏ –æ—Ä–æ–º–∏—Ö–æ“≥", russian: "–ø–∞—Ü–∏—Ñ–∏—Å—Ç", english: "pacifist" },
            { tajik: "–ø–∞—Ä–∞–Ω–æ–π—è (–∫–∞—Å–∞–ª–∏–∏ —Ä—É“≥–∏)", russian: "–ø–∞—Ä–∞–Ω–æ–π—è", english: "paranoia" },
            { tajik: "–±–∞ “≥–∞“õ–∏“õ–∞—Ç –º–æ–Ω–∞–Ω–¥", russian: "–ø—Ä–∞–≤–¥–æ–ø–æ–¥–æ–±–Ω—ã–π", english: "plausible" },
            { tajik: "–∑–∏–Ω–¥–∞–≥–∏–∏ —à–∞—Ö—Å”£", russian: "–ª–∏—á–Ω–∞—è –∂–∏–∑–Ω—å", english: "private life" },
            { tajik: "–º—É–º–∫–∏–Ω", russian: "–≤–æ–∑–º–æ–∂–Ω—ã–π", english: "probable" },
            { tajik: "“≥–∞“õ–∏“õ”£", russian: "—Ä–µ–∞–ª—å–Ω—ã–π", english: "real" }
        ];

        // DOM elements
        const unitSelection = document.getElementById('unit-selection');
        const gameScreen = document.getElementById('game-screen');
        const unitTitle = document.getElementById('unit-title');
        const wordElement = document.getElementById('word');
        const translationElement = document.getElementById('translation');
        const progressElement = document.getElementById('progress');
        const timerProgressElement = document.getElementById('timer-progress');
        const timerTextElement = document.getElementById('timer-text');
        const answerInput = document.getElementById('answer');
        const submitBtn = document.getElementById('submit-btn');
        const resultsElement = document.getElementById('results');
        const scoreElement = document.getElementById('score');
        const percentageElement = document.getElementById('percentage');
        const mistakesElement = document.getElementById('mistakes');
        const errorsContainer = document.getElementById('errors');
        const successMessage = document.getElementById('success-message');
        const unit5Btn = document.getElementById('unit5-btn');
        const unit6Btn = document.getElementById('unit6-btn');
        const unit7Btn = document.getElementById('unit7-btn');
        const restartBtn = document.getElementById('restart-btn');
        const mainContainer = document.getElementById('main-container');

        // Game state
        let currentVocabulary = [];
        let currentIndex = 0;
        let score = 0;
        let mistakes = [];
        let timeLeft = 420; // 7 minutes in seconds
        let timer;

        // Start selected unit
        function startUnit(unitName, vocabulary) {
            currentVocabulary = [...vocabulary]; // Copy the array
            shuffleArray(currentVocabulary); // Shuffle the words
            
            currentIndex = 0;
            score = 0;
            timeLeft = 420;
            mistakes = [];
            
            unitSelection.style.display = 'none';
            gameScreen.style.display = 'block';
            resultsElement.style.display = 'none';
            
            unitTitle.textContent = unitName;
            showWord();
            startTimer();
            
            setTimeout(() => {
                answerInput.focus();
            }, 100);
        }

        // Show current word
        function showWord() {
            wordElement.textContent = currentVocabulary[currentIndex].tajik;
            translationElement.textContent = currentVocabulary[currentIndex].russian;
            progressElement.textContent = `${currentIndex + 1}/${currentVocabulary.length}`;
            answerInput.value = '';
        }

        // Start timer
        function startTimer() {
            clearInterval(timer);
            updateTimer();
            
            timer = setInterval(() => {
                timeLeft--;
                updateTimer();
                
                if (timeLeft <= 0) {
                    finishGame();
                }
            }, 1000);
        }

        // Update timer display
        function updateTimer() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            timerTextElement.textContent = `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
            
            // Update progress circle
            const progress = (420 - timeLeft) / 420 * 360;
            timerProgressElement.style.transform = `rotate(${progress}deg)`;
            
            // Change color based on time left
            if (timeLeft < 60) {
                timerProgressElement.style.backgroundColor = '#e74c3c';
            } else if (timeLeft < 180) {
                timerProgressElement.style.backgroundColor = '#f39c12';
            } else {
                timerProgressElement.style.backgroundColor = '#4CAF50';
            }
        }

        // Check answer
        function checkAnswer() {
            const userAnswer = answerInput.value.trim().toLowerCase();
            const correctAnswer = currentVocabulary[currentIndex].english.toLowerCase();
            
            if (userAnswer === correctAnswer) {
                score++;
            } else {
                mistakes.push({
                    word: currentVocabulary[currentIndex].tajik,
                    translation: currentVocabulary[currentIndex].russian,
                    correct: currentVocabulary[currentIndex].english,
                    userAnswer: userAnswer
                });
            }
            
            currentIndex++;
            
            if (currentIndex < currentVocabulary.length && timeLeft > 0) {
                showWord();
            } else {
                finishGame();
            }
        }

        // Finish game and show results
        function finishGame() {
            clearInterval(timer);
            
            const percentage = Math.round((score / currentVocabulary.length) * 100);
            
            scoreElement.textContent = score;
            percentageElement.textContent = `${percentage}%`;
            mistakesElement.textContent = mistakes.length;
            
            // Display success message based on score
            if (score >= 42) {
                successMessage.textContent = "–ê—ä–ª–æ! –®—É–º–æ –∞–∑ 50 –∫–∞–ª–∏–º–∞ " + score + "-—Ç–æ—Ä–æ –¥—É—Ä—É—Å—Ç “∑–∞–≤–æ–± –¥–æ–¥–µ–¥! üéâ";
                successMessage.style.color = "#27ae60";
            } else {
                successMessage.textContent = "–¢–∞–ª–æ—à –∫—É–Ω–µ–¥, —à—É–º–æ –∞–∑ 50 –∫–∞–ª–∏–º–∞ " + score + "-—Ç–æ—Ä–æ –¥—É—Ä—É—Å—Ç “∑–∞–≤–æ–± –¥–æ–¥–µ–¥. üí™";
                successMessage.style.color = "#e74c3c";
            }
            
            // Display errors
            errorsContainer.innerHTML = '';
            mistakes.forEach((mistake, index) => {
                const errorItem = document.createElement('div');
                errorItem.className = 'error-item';
                errorItem.innerHTML = `
                    <div class="error-word">${index + 1}. ${mistake.word} (${mistake.translation})</div>
                    <div class="correct-answer">“∂–∞–≤–æ–±–∏ –¥—É—Ä—É—Å—Ç: ${mistake.correct}</div>
                    <div class="user-answer">“∂–∞–≤–æ–±–∏ —à—É–º–æ: ${mistake.userAnswer || '---'}</div>
                `;
                errorsContainer.appendChild(errorItem);
            });
            
            // Show results and hide game screen
            gameScreen.style.display = 'none';
            resultsElement.style.display = 'block';
        }

        // Shuffle array function
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        // Event listeners
        submitBtn.addEventListener('click', checkAnswer);
        
        answerInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                checkAnswer();
            }
        });

        // Unit selection buttons
        unit5Btn.addEventListener('click', () => {
            startUnit("–Æ–Ω–∏—Ç 5 –û—Ö–∏—Ä", unit5Vocabulary);
        });
        
        unit6Btn.addEventListener('click', () => {
            startUnit("–Æ–Ω–∏—Ç 6", unit6Vocabulary);
        });
        
        unit7Btn.addEventListener('click', () => {
            startUnit("–Æ–Ω–∏—Ç 7 –û—Ö–∏—Ä", unit7Vocabulary);
        });

        // Restart button
        restartBtn.addEventListener('click', function() {
            resultsElement.style.display = 'none';
            unitSelection.style.display = 'flex';
        });
    </script>
</body>
</html>
